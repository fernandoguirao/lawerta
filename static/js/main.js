// Generated by CoffeeScript 1.6.3
(function() {
  var changeProject, closeCurtain, openCurtain, scrollClass, showAtScroll;

  showAtScroll = function() {
    var copy, endOf;
    endOf = $(window).height() - 60;
    copy = $(".copyright");
    return $(window).scroll(function() {
      if ($(window).scrollTop() > endOf) {
        return copy.fadeIn();
      } else {
        return copy.fadeOut();
      }
    });
  };

  scrollClass = function() {
    return $(window).scroll(function() {
      if ($(".single-project").length === 1) {

      } else {
        if ($(window).scrollTop() > 80) {
          return $("header,#single.proyectos").addClass("scrolled");
        } else {
          return $("header,#single.proyectos").removeClass("scrolled");
        }
      }
    });
  };

  openCurtain = function(gallery, single) {
    var $si;
    gallery.addClass("curtain");
    $si = 0;
    gallery.children().children().each(function() {
      if ($si === 0) {
        $(this).addClass("goLeft");
        return $si = 1;
      } else if ($si === 1) {
        $(this).addClass("goLeft");
        return $si = 2;
      } else if ($si === 2) {
        $(this).addClass("goRight");
        return $si = 3;
      } else {
        $(this).addClass("goRight");
        return $si = 0;
      }
    });
    $("#single.proyectos").addClass("safclass");
    single.fadeIn(700, function() {
      return gallery.hide();
    });
    single.addClass("zTop");
    gallery.addClass("zBottom");
    single.removeClass("zBottom");
    gallery.removeClass("zTop");
    $("#footer").addClass("singlef");
    return showAtScroll();
  };

  closeCurtain = function(gallery, single) {
    gallery.show();
    gallery.addClass("fixed");
    single.fadeOut(700);
    $("#single.proyectos").removeClass("safclass");
    $("html, body").animate({
      scrollTop: "0"
    });
    gallery.children().children().removeClass("goLeft");
    gallery.children().children().removeClass("goRight");
    gallery.removeClass("curtain");
    gallery.removeClass("fixed");
    gallery.addClass("zTop");
    single.addClass("zBottom");
    single.removeClass("zTop");
    gallery.removeClass("zBottom");
    return $("#footer").removeClass("singlef");
  };

  changeProject = function(actual, tipo) {
    var $actual, $siguiente;
    $actual = actual.parent().parent().parent().parent().parent();
    $siguiente = "";
    if (tipo === "next") {
      if ($actual.is(":last-child")) {
        $siguiente = actual.parent().parent().parent().parent().parent().parent().children().first();
      } else {
        $siguiente = actual.parent().parent().parent().parent().parent().next();
      }
    } else {
      if ($actual.is(":first-child")) {
        $siguiente = actual.parent().parent().parent().parent().parent().parent().children().last();
      } else {
        $siguiente = actual.parent().parent().parent().parent().parent().prev();
      }
    }
    $actual.children(".info-col").addClass("toLeft");
    $actual.children(".slides").addClass("toRight");
    $siguiente.children(".info-col").addClass("toLeft");
    $siguiente.children(".slides").addClass("toRight");
    setTimeout((function() {
      $actual.hide();
      $actual.children(".info-col").removeClass("toLeft");
      $actual.children(".slides").removeClass("toRight");
      $actual.removeClass("zTop");
      $siguiente.addClass("zTop");
      return $siguiente.show();
    }), 500);
    setTimeout((function() {
      $siguiente.children(".info-col").removeClass("toLeft");
      return $siguiente.children(".slides").removeClass("toRight");
    }), 700);
    return setTimeout((function() {
      return $("html, body").animate({
        scrollTop: "0"
      });
    }), 300);
  };

  Modernizr.addTest("firefox", function() {
    return !!navigator.userAgent.match(/firefox/i);
  });

  showAtScroll();

  scrollClass();

  $(".cOpen").click(function() {
    $("#side-menu").addClass("moveLeft");
    return $(".openf").removeClass("openf");
  });

  $(".cClose").click(function() {
    return $("#side-menu").removeClass("moveLeft");
  });

  $(".body a.col-md-3").click(function(event) {
    var dato;
    $("html, body").animate({
      scrollTop: "0"
    });
    $("#single.proyectos").removeClass("outof");
    $("body").addClass("single-project");
    $("header,#single.proyectos").addClass("scrolled");
    dato = $(this).data("project");
    event.preventDefault();
    $("#gallery").addClass("outofgallery");
    return setTimeout((function() {
      return openCurtain($("#gallery"), $(".proyecto[data-project='" + dato + "']"));
    }), 450);
  });

  $(".closeit,.work-link").click(function() {
    $("#single").addClass("outof");
    $("header,#single.proyectos").removeClass("scrolled");
    $("body").removeClass("single-project");
    closeCurtain($("#gallery"), $(".proyecto"));
    $(".work-link").addClass("active");
    return $(".contact-link").removeClass("active");
  });

  $(".contact-link").click(function(event) {
    $("html, body").animate({
      scrollTop: "0"
    });
    $("#single.contacto").removeClass("outof");
    $("body").addClass("single-project");
    $("#single.contacto").addClass("scrolled");
    $("header").removeClass("scrolled");
    $("#gallery").addClass("outofgallery");
    setTimeout((function() {
      return openCurtain($("#gallery"), $(".contacto .proyecto"));
    }), 450);
    $(".work-link").removeClass("active");
    $(".contact-link").addClass("active");
    $("#single.proyectos").addClass("outof");
    $("header,#single.proyectos").removeClass("scrolled");
    return closeCurtain($("#single.proyectos"), $(".proyectos .proyecto"));
  });

  $("#footer .icons a").click(function(event) {
    event.preventDefault();
    return $("#footer").toggleClass("openf");
  });

  $("li.next").click(function() {
    return changeProject($(this), "next");
  });

  $("li.prev").click(function() {
    return changeProject($(this), "prev");
  });

}).call(this);
